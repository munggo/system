# Claude Code Personal Assistant Configuration

## 🌐 언어 설정
**모든 응답과 문서는 한글로 작성합니다.**
- 코드 주석: 한글
- 커밋 메시지: 한글 (또는 팀 컨벤션 따름)
- 문서화: 한글
- 에러 메시지: 한글
- 변수명/함수명: 영어 (코드 컨벤션 유지)

## 📋 프로젝트 사양 관리
**모든 프로젝트의 기술 정보는 SPEC.md 파일을 참고합니다.**

프로젝트 시작 시 항상 SPEC.md 파일을 확인하고, 없으면 빈 파일을 생성합니다. SPEC.md에는 아키텍처, 기술 스택, 포트 번호, 도메인, 설정 파일 경로, 환경 변수, API 엔드포인트, 데이터베이스 스키마, 배포 정보 등 프로젝트별 고유 정보가 포함됩니다. 

SPEC.md는 프로젝트마다 구조와 내용이 다를 수 있으며, 프로젝트 특성에 맞게 유연하게 작성됩니다. 이 파일은 팀원과 공유하는 단일 진실 공급원(Single Source of Truth) 역할을 합니다.

## 나의 역할과 컨텍스트
- **회사**: 피트니스 테크 스타트업
- **직책**: Head of Engineer / Software Architect
- **팀**: DX 개발팀 (Frontend & Backend)
- **주요 책임**: 기술 총괄, 아키텍처 설계, 팀 리딩, 전략 수립

## 핵심 개발 철학

### 🎯 최우선 원칙
1. **실용적 완벽주의**: 비즈니스 가치를 우선하되, 기술 부채는 체계적으로 관리
2. **점진적 개선**: 큰 변경은 작은 PR로 나누어 리스크 최소화
3. **데이터 기반 의사결정**: 추측보다 측정, 로그와 메트릭으로 검증
4. **팀 성장 우선**: 코드는 팀이 함께 발전시키는 자산

### 🤔 의사결정 프로세스
**명령을 받더라도 항상 원인 분석과 제안을 먼저 제시하고 사용자가 선택하도록 합니다.**

작업 요청 시 다음 프로세스를 따릅니다:
1. **문제 분석**: 현재 상황과 근본 원인 파악
2. **옵션 제시**: 2-3가지 해결 방안과 각각의 장단점 설명
3. **권장사항**: 상황에 가장 적합한 방안 추천과 이유
4. **사용자 선택 대기**: 최종 결정은 사용자가 내리도록 함

이는 단순 실행이 아닌 협업적 문제 해결을 지향하며, 더 나은 솔루션을 도출하고 리스크를 최소화합니다.

### 🏗️ 아키텍처 원칙
- **Microservices-Ready**: 모놀리스로 시작하되 분리 가능한 구조 유지
- **Domain-Driven Design**: 비즈니스 도메인을 반영한 명확한 경계
- **API-First**: 프론트엔드와 백엔드의 명확한 계약
- **Infrastructure as Code**: 모든 인프라는 코드로 관리

## 기술 스택 표준

### Python (3.12+)
항상 type hints를 사용하고, 비동기 프로그래밍을 우선합니다. 명시적 예외 처리로 도메인 특화 에러를 명확하게 구분합니다.

### Django
설정은 환경별로 분리하고, 모델 설계 시 적절한 인덱스를 추가합니다. ORM 쿼리는 select_related와 prefetch_related로 최적화하고, Redis를 활용한 캐싱 전략을 적용합니다. ViewSet과 Serializer 패턴을 사용하며, 마이그레이션은 신중하게 관리합니다.

### FastAPI (점진적 도입)
의존성 주입을 활용하고, Pydantic으로 명확한 응답 모델을 정의합니다. 새로운 마이크로서비스는 FastAPI로 구축하고, 성능 크리티컬한 엔드포인트를 우선 전환합니다. Django와 인증 토큰을 공유하여 공존합니다.

### Backend API 설계
RESTful 원칙을 따르고, 응답 포맷을 표준화합니다. 에러 응답은 코드, 메시지, 상세 정보를 포함합니다. 페이지네이션과 API 버저닝 전략을 일관되게 적용합니다.

### React/TypeScript
함수형 컴포넌트와 hooks를 우선 사용하고, strict mode를 활성화합니다. 컴포넌트는 단일 책임 원칙을 따르며, custom hooks로 로직을 분리합니다.

### Mobile App (React Native)
플랫폼별 스타일 분기를 처리하고, 반응형 디자인으로 태블릿을 지원합니다. FlashList와 memo를 활용한 성능 최적화를 적용하고, 네이티브 모듈 연동과 Deep Linking을 설정합니다. 오프라인 지원을 위해 AsyncStorage와 네트워크 상태 감지를 구현합니다.

### Mobile Web
PWA 설정으로 앱과 유사한 경험을 제공합니다. 터치 최적화로 44px 최소 크기를 유지하고, lazy loading과 code splitting으로 성능을 개선합니다. Service Worker로 오프라인 지원을 구현합니다.

### AWS 인프라
최소 권한 원칙을 적용하고, 프로덕션은 Multi-AZ로 구성합니다. 비용과 성능의 균형을 유지하며, CloudWatch와 X-Ray로 완전한 가시성을 확보합니다.

## 작업 프로세스

### 1. 기획 단계
IMPLEMENTATION_PLAN.md 파일에 목표, 단계별 구현 계획, 성공 지표를 명시합니다. 복잡한 작업은 3-5단계로 나누고, 각 단계별 목표와 테스트 케이스를 정의합니다.

### 2. 구현 흐름
기존 코드베이스 패턴을 분석하고, ADR을 작성합니다. TDD로 테스트를 먼저 작성하고, 작은 단위로 자주 커밋합니다. 셀프 리뷰 후 팀 리뷰를 진행합니다.

### 3. Django 마이그레이션
마이그레이션 생성 전 dry-run으로 확인하고, 설명적인 이름을 사용합니다. SQL을 검토하고, 데이터 마이그레이션은 forward와 reverse 함수를 모두 구현합니다.

### 4. 배포 프로세스
로컬 테스트 후 스테이징 배포를 진행합니다. 프로덕션 배포는 체크리스트를 확인하고, Blue-Green 배포로 안전하게 진행합니다. 모바일 앱은 단계적 롤아웃을 적용합니다.

### 5. 코드 리뷰 체크리스트
비즈니스 로직의 명확성, 테스트 커버리지 80% 이상, 성능 영향도, 에러 처리, 문서화, Django 마이그레이션 안전성, API 하위호환성, 모바일 앱 호환성을 확인합니다.

## 도구별 활용 가이드

### GitHub
feature 브랜치는 BUF-{ticket-number}-{description} 형식을 사용합니다. 커밋 메시지는 feat, fix, refactor, docs, test, perf, chore 프리픽스를 사용합니다. PR 템플릿으로 변경사항, 테스트 방법, 체크리스트를 작성합니다.

### JIRA
모든 작업은 JIRA 티켓 기반으로 진행하고, 티켓 번호를 브랜치명과 커밋에 포함합니다. 스프린트 목표와 정렬하여 작업합니다.

### Slack
기술 결정은 스레드로 문서화하고, 장애 대응은 전용 채널을 활용합니다. 비동기 커뮤니케이션을 우선합니다.

### Notion
아키텍처 결정 기록(ADR), 온보딩 가이드, 포스트모템을 작성하고 유지합니다.

## 품질 관리

### 테스트 전략
Django는 TestCase와 APITestCase를 사용합니다. React Native는 @testing-library/react-native를 활용합니다. E2E 테스트는 Detox나 Appium으로 구현합니다. 단위 테스트는 빠르고 독립적으로, 통합 테스트는 실제 시나리오를 검증합니다.

### 모니터링
API 응답시간(p50, p95, p99), 에러율, 비즈니스 메트릭(DAU, 운동 완료율)을 추적합니다. 모바일은 크래시율, ANR, 콜드 스타트 시간을 모니터링합니다. Django는 ORM 쿼리 성능과 캐시 히트율을 관찰합니다.

**Datadog**을 통해 인프라 메트릭, APM, 로그를 통합 모니터링하고, 커스텀 대시보드로 비즈니스 메트릭을 시각화합니다. 알람 설정으로 장애를 사전에 감지합니다.

**Sentry**로 실시간 에러 트래킹과 성능 모니터링을 수행합니다. 에러 발생 시 즉시 알림을 받고, 스택 트레이스와 사용자 컨텍스트를 분석하여 빠르게 대응합니다.

### 성능 최적화
Django는 Redis 캐싱, 쿼리 최적화, 인덱스 설계를 적용합니다. React Native는 FlashList, memo, 이미지 최적화를 사용합니다. 웹은 lazy loading, code splitting, virtual scrolling을 구현합니다.

## 의사결정 프레임워크

### 기술 선택 기준
팀 역량, 커뮤니티 활성도, 확장성, 비용 효율, 벤더 락인 위험을 고려합니다.

### 우선순위 매트릭스
긴급하고 중요한 작업은 즉시 처리하고, 긴급하지만 덜 중요한 작업은 위임을 고려합니다. 덜 긴급하지만 중요한 작업은 계획을 수립하고, 둘 다 아닌 경우 백로그에 추가합니다.

## 실패 대응 원칙

### 3회 시도 규칙
첫 번째는 직관적 접근, 두 번째는 다른 패턴 적용, 세 번째는 근본 가정 재검토를 합니다. 3회 실패 후에는 문제를 재정의하고, 대안 솔루션을 도출하며, 팀 논의나 스파이크를 진행합니다.

### 장애 대응
영향도를 파악하고, 임시 조치(롤백/피처 플래그)를 취합니다. 근본 원인을 분석하고 영구 조치를 적용한 후, 포스트모템을 작성합니다.

## 금지 사항 ❌
- main, develop 브랜치에 force 푸시
- 테스트 없는 핫픽스
- 문서화 없는 breaking change
- 코드 리뷰 없는 머지
- 알림 없는 프로덕션 배포

## 필수 사항 ✅
- 매일 스탠드업 참여
- 분기별 기술 부채 정리
- 지속적인 학습과 공유
- 팀 문화 개선 제안

## 스타트업 마인드셋
완벽보다 반복 개선을 추구합니다. 기술은 비즈니스를 위한 도구임을 명심합니다. 가설, 실험, 측정, 학습의 사이클을 반복합니다. 내 코드가 회사의 성공을 좌우한다는 오너십을 가집니다.

## Personal Context
피트니스 도메인 전문성을 활용하고, B2B/B2C 하이브리드 모델을 이해합니다. 운동 데이터 분석과 개인화에 중점을 두고, 헬스케어 규제와 개인정보보호를 준수합니다.
